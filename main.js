(()=>{"use strict";const e=(e,t)=>{const n=e;let s=e[0].length;const o=t;return{hit:()=>{s-=1},isSunk:()=>0===s,getShipLength:e=>n[e],getShipNumber:()=>o}},t=t=>{const s=10;let o,a=[],l=[];const i=e=>{const t=Math.floor(2*Math.random()),n=e.getShipLength(t),o=Math.abs(Math.floor(Math.random()*a.length-n.length*n[1])),l=n.some((e=>a[o+e].classList.contains("ship"))),r=n.some((e=>(o+e)%s==9)),c=n.some((e=>(o+e)%s==0));!l&&(r&&!c||!r&&c||!r&&!c)?n.forEach((t=>{a[o+t].classList.add("ship"),a[o+t].classList.add("ship-"+e.getShipNumber())})):i(e)},r=()=>{o=n(t),(()=>{const e=document.getElementById("player"+t+"-board");for(let n=0;n<100;n++){const n=document.createElement("div");n.classList.add("tile"+t),e.appendChild(n),a.push(n)}})(),(()=>{const t=[[0,1],[0,1,2],[0,1,2],[0,1,2,3],[0,1,2,3,4]],n=[[0,s],[0,s,20],[0,s,20],[0,s,20,30],[0,s,20,30,40]];for(let s=0;s<t.length;s++){const o=e([t[s],n[s]],s);l.push(o)}})(),(()=>{let e=[];return a.forEach((t=>{t.classList.contains("ship")&&e.push(t)})),e})().forEach((e=>{e.classList.remove("ship");for(let t=0;t<5;t++)e.classList.remove("ship"+t)})),l.forEach((e=>{i(e)}))};return r(),{getTiles:()=>a,getShips:()=>l,getPlayer:()=>o,generateBoard:r}},n=e=>{const t=e;let n=5,s=!1;return{switchTurn:()=>{s=!s},removeHealth:()=>{n-=1},hasLost:()=>0===n,getNumber:()=>t,getTurn:()=>s}};let s,o,a=!1;function l(){const e=s.getTiles();let t=Math.abs(Math.floor(Math.random()*s.getTiles().length));t=function(e,t){let n=e;for(let e=0;e<t.length;e++){if(!t[n].classList.contains("taken"))return n;n+=1,100===n&&(n=0)}}(t,e),setTimeout((function(){c(e[t],s)}),500)}function i(){s.getPlayer().switchTurn()}function r(e,t){e.isSunk()&&(t.getPlayer().removeHealth(),t.getPlayer().hasLost()&&function(){a=!0;const e=document.createElement("h1"),t=document.createElement("button");t.textContent="Play Again",t.addEventListener("click",(()=>{document.getElementById("info-box").replaceChildren(),document.getElementById("player1-board").replaceChildren(),document.getElementById("player2-board").replaceChildren(),a=!1,h()})),s.getPlayer().hasLost()?e.textContent="Computer Wins!":e.textContent="Player Wins!",document.getElementById("info-box").appendChild(e),document.getElementById("info-box").appendChild(t)}())}function c(e,t){e.classList.remove("tile"+t.getPlayer().getNumber()),e.classList.add("taken"),e.removeEventListener("click",(()=>{})),e.classList.contains("ship")?(function(e,t){const n=t.getShips();e.classList.add("destroyed");for(let s=0;s<5;s++)e.classList.contains("ship-"+s)&&(n[s].hit(),r(n[s],t))}(e,t),!0!==s.getPlayer().getTurn()&&l()):(i(),!1===s.getPlayer().getTurn()&&l())}function h(){s=t("1"),o=t("2"),o.getTiles().forEach((e=>{e.addEventListener("click",(()=>{s.getPlayer().getTurn()&&1==!a&&c(e,o)}))})),i()}h()})();